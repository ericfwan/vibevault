{% extends "base.html" %}
{% block content %}

<section class="card">
  <div class="home-hero">
    <h2>VibeVault</h2>
    <div class="muted small">Your private music journal, sorted by mood.</div>
    <div class="actions">
      <a class="btn tiny primary" href="{{ url_for('main.search') }}">Find a song</a>
      <a class="btn tiny ghost" href="{{ url_for('main.vault') }}">Open Vault</a>
      <a class="btn tiny ghost" href="{{ url_for('main.mood_map') }}">Mood Map</a>
    </div>
  </div>
</section>

<section class="card">
  <div class="section-head">
    <h3>Quick Previews <span class="count-badge">{{ latest_songs|length }}</span></h3>
  </div>

  {% if latest_songs and latest_songs|length > 0 %}
    <ul class="mini-list">
      {% for s in latest_songs %}
        <li class="mini-item" data-preview-url="{{ s.preview_url or '' }}">
          <div class="mini-art">
            {% if s.artwork_url %}
              <img src="{{ s.artwork_url }}" alt="Artwork">
            {% else %}
              <div class="art-placeholder tiny"></div>
            {% endif %}
          </div>
          <div class="mini-content">
            <div class="song-title">{{ s.title }}</div>
            {% if s.artist %}
              <div class="song-artist">{{ s.artist }}</div>
            {% endif %}
            <span class="mini-mood">{{ s.mood }}</span>
            {% if s.note %}
              <div class="song-note">{{ s.note }}</div>
            {% endif %}
          </div>
          <div class="mini-actions">
            {% if s.preview_url %}
              <button class="btn tiny" type="button" data-audio-toggle>Play</button>
            {% endif %}
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <div class="ghost-row">
      <div class="ghost-art"></div>
      <div class="ghost-lines">
        <div class="ghost-line wide"></div>
        <div class="ghost-line"></div>
      </div>
    </div>
    <div class="ghost-row">
      <div class="ghost-art"></div>
      <div class="ghost-lines">
        <div class="ghost-line wide"></div>
        <div class="ghost-line"></div>
      </div>
    </div>
  {% endif %}
</section>

<section class="card">
  <div class="section-head">
    <h3>Mood Vaults</h3>
  </div>
  <div class="mood-picker">
    {% for m in moods %}
      <a class="pill" href="{{ url_for('main.vault', mood=m) }}">{{ m }}</a>
    {% endfor %}
  </div>
</section>

{% endblock %}
